# NOPE Test Suites - Transparency Dashboard

Public-facing dashboard showing NOPE's classification expectations and test results.

## What This Is

This repository provides complete transparency into NOPE's safety classification:

1. **Test Specifications** (`fixtures/`) - What we EXPECT (our ground truth)
2. **Result Generation** (`scripts/`) - How we TEST (calls the API)
3. **Public Display** (`src/routes/`) - What we GOT (the results)

All test suites are public. We show inputs, expectations, and actual results so users can understand what "correct" classification looks like.

## Repository Structure

```
suites/
├── fixtures/              # Test suite specifications (expectations)
│   ├── core-transparency.json
│   ├── expanded-taxonomy.json
│   ├── filter-none-suite.json
│   ├── acute-real-world.json
│   ├── edge-cases-suite.json
│   └── realistic-prevalence.json
├── scripts/               # CLI to generate results
│   └── generate-results.ts
├── static/suites/         # Generated results (displayed on site)
├── src/routes/            # SvelteKit display UI
│   ├── +page.svelte       # Suite list
│   └── [id]/+page.svelte  # Individual suite details
└── package.json
```

## Test Suites

| Suite | Cases | Purpose |
|-------|-------|---------|
| **core-transparency** | 26 | Core test cases across all domains |
| **expanded-taxonomy** | 21 | Full taxonomy coverage (106 features) |
| **filter-none-suite** | 30 | Validates two-stage cost efficiency |
| **acute-real-world** | 30 | Real crisis scenarios (critical/emergency) |
| **edge-cases-suite** | 35 | Edge cases (gaming, fiction, education) |
| **realistic-prevalence** | 97 | Realistic deployment simulation (~1% crisis rate) |

## Generating Results

Results are generated by calling the external NOPE API (not internal libraries). This makes the suites repo completely independent.

### Prerequisites

1. Install dependencies:
```bash
pnpm install
```

2. Configure API endpoint (create `.env`):
```bash
cp .env.example .env
# Edit .env to set API_URL and API_KEY if needed
```

3. Ensure the API is running:
```bash
# In api repo:
cd ../api && pnpm dev
# API should be running at http://localhost:8788
```

### Generate Results

Generate results for a single suite:
```bash
pnpm generate:results fixtures/core-transparency.json
```

Generate results for all suites:
```bash
pnpm generate:all
```

Results are saved to `static/suites/*.json` and automatically displayed on the site.

### Configuration

Environment variables (optional):

- `API_URL` - NOPE API endpoint (default: `http://localhost:8788`)
- `API_KEY` - API key for authentication (optional for local dev)

## Local Development

Run the display site:
```bash
pnpm dev
```

Visit http://localhost:5175 to see the suite results.

## Deployment

The site is deployed to Netlify. Generated results in `static/suites/` are committed to git and served as static files.

**Workflow:**
1. Update fixtures in `fixtures/` (modify expectations)
2. Run `pnpm generate:all` (generates new results)
3. Review results on local dev server
4. Commit changes (fixtures + generated results)
5. Push to GitHub → Netlify deploys automatically

## Philosophy

We believe in radical transparency about safety classification:

- **No black boxes** - Show exactly what we expect and what we got
- **Evidence-based** - Ground truth aligned with clinical frameworks
- **Public accountability** - Anyone can verify our claims
- **Continuous improvement** - Track classification quality over time

If we claim "99%+ accuracy" on crisis detection, you can verify it here.
